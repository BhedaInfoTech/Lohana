@model Lohana.Models.Master.SightSeeingViewModel


@*<link href="~/Content/plugin/owl.carousel/assets/owl.carousel.css" rel="stylesheet" />


    <link href="~/Content/plugin/owl.carousel/assets/owl.theme.default.min.css" rel="stylesheet" />*@


<div class="card-block p-a-0 row-md" id="divSightSeeingBasicDetails">

    <input type="hidden" id="hdnSightSeeingid" value="@Model.SightSeeing.EnquiryitemId" name="SightSeeing.EnquiryitemId" />
    <input type="hidden" id="hdncost" value="@Model.SightSeeing.PackageCost" name="SightSeeing.PackageCost" />
    <input type="hidden" id="hdnDate" value="@Model.SightSeeing.FromDate" name="SightSeeing.FromDate" />
    <input type="hidden" id="hdnTravelDate" value="@Model.SightSeeing.TravelDate" name="SightSeeing.TravelDate" />
    <input type="hidden" id="hdnadult" value="@Model.SightSeeing.AdultCount" name="SightSeeing.Adultcount" />
    <input type="hidden" id="hdnchild" value="@Model.SightSeeing.ChildCount" name="SightSeeing.ChildCount" />
    <input type="hidden" id="hdnCityId" value="@Model.SightSeeing.CityId" />
    <input type="hidden" id="hdnStateId" value="@Model.SightSeeing.StateId" />
    <input type="hidden" id="hdnCountryId" value="@Model.SightSeeing.CountryId" />
    <input type="hidden" id="hdnQuotationType" name="Quotation.Enquirytype" value="@((int)LohanaBusinessEntities.EnquiryType.Sightseeing)" />


    <input type="hidden" id="hdnSearchSightSeeingId" value="@Model.Filter.SightSeeingId" name="Filter.SightSeeingId">
    @if (Model.SightSeeingSearchList.Count > 0)
    {
        foreach (var item in Model.SightSeeingSearchList)
        {

            <div class="col-md-3">
                <div class="box bg-white product product-4">
                    <div id="carousel-example_@item.SightSeeingId" class="carousel slide" data-ride="carousel">

                        <ol class="carousel-indicators">
                            @if (item.Images != null)
                            {

                                for (int i = 0; i < item.Images.Count; i++)
                                {
                                    if (i == 0)
                                    {
                                        <li data-target="#carousel-example" data-slide-to="@i" class="active"></li>
                                    }
                                    else
                                    {
                                        <li data-target="#carousel-example" data-slide-to="@i" class=""></li>
                                    }

                                }
                            }
                        </ol>

                        <div class="carousel-inner" role="listbox">
                            @if (item.Images != null)
                            {

                                for (int i = 0; i < item.Images.Count; i++)
                                {
                                    if (i == 0)
                                    {
                                        <div class="carousel-item active">
                                            <img src="~/Upload/@item.Images[i].UniqueAttachmentId" style="width:1150px;height:250px" alt="@item.Images[i].AttachmentName" />
                                        </div>
                                    }
                                    else
                                    {
                                        <div class="carousel-item">
                                            <img src="~/Upload/@item.Images[i].UniqueAttachmentId" style="width:1150px;height:250px" alt="@item.Images[i].AttachmentName">
                                        </div>
                                    }

                                }
                            }
                        </div>

                        <a class="left carousel-control" href="#carousel-example_@item.SightSeeingId" role="button" data-slide="prev">
                            <span class="icon-prev" aria-hidden="true"></span>
                            <span class="sr-only">Previous</span>
                        </a>
                        <a class="right carousel-control" href="#carousel-example_@item.SightSeeingId" role="button" data-slide="next">
                            <span class="icon-next" aria-hidden="true"></span>
                            <span class="sr-only">Next</span>
                        </a>

                    </div>
                </div>
            </div>

            @*<div class="col-md-3">
                    <div class="media-body">
                        <div class="pli-content">
                            <input type="hidden" id="hdnSightSeeingId" value="@item.SightSeeingId" />
                            <input type="hidden" id="hdnDate" value="@item.FromDate" />
                            <h3><a class="text-black" href="#">	@item.SightSeeingName</a></h3>
                            <h4><small class="text-muted">Category: @item.location</small></h4>
                            <input type="hidden" id="hdnLocation" value="@item.location" />
                            <h5><small class="text-info">Type: @item.PackageTypeName</small></h5>
                        </div>
                    </div>
                </div>*@


            <div class="col-md-7">
                <div class="table-responsive">
                    <table class="table m-md-b-0" id="tblGitDetails" style="overflow-y:scroll">
                        <thead>
                            <tr>
                                <td>
                                    <div class="form-group">
                                        <input type="hidden" id="hdnSightSeeingId" value="@item.SightSeeingId" />
                                        <input type="hidden" id="hdnDate" value="@item.FromDate" />
                                        <h3><label id="lblSightSeeingName"><b><a class="text-black" href="#">	@item.SightSeeingName</a></b></label></h3>
                                    </div>
                                </td>
                            </tr>

                            <tr>
                                <td>
                                    <div class="form-group">
                                        <h4><small class="text-muted"><label id="lblLocation">Location: @item.location</label></small></h4>
                                        <input type="hidden" id="hdnLocation" value="@item.location" />
                                    </div>
                                </td>
                            </tr>

                            @*<tr >
                                    <td>
                                        <div class="form-group">
                                            <label><b class="text-black">Description:@Html.Raw(@item.Description)</b></label>
                                        </div>
                                    </td>
                                </tr>*@

                            <tr>
                                <td>
                                    <div class="form-group">
                                        <h5>
                                            <b class="text-info">
                                                <label id="lblDuration">
                                                    Duration: @Html.Raw(@item.Duration) &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;
                                                    VisitTime: @Html.Raw(@item.VisitTime)
                                                </label>
                                                <input type="hidden" id="hdnDuration" value="@item.Duration" />
                                            </b>
                                        </h5>
                                    </div>
                                </td>
                            </tr>

                            @*<tr>
                                    <td>
                                        <div class="form-group">
                                            <label><b class="text-black">Highlights: @Html.Raw(@item.Highlights)</b></label>
                                        </div>
                                    </td>
                                </tr>*@
                            <tr>
                                <td>
                                    <div class="form-group">
                                        <h5><span class="text-danger"> <label id="lblTotalCost"><b><span class="text-danger">Rs.@item.NetRate</span></b></label></span></h5>
                                    </div>
                                </td>
                            </tr>

                            <tr>
                                <td>
                                    <div class="form-group">
                                        @*<label id="lblDuration"><b class="text-info">Duration: @Html.Raw(@item.Duration)</b></label>
                                            <input type="hidden" id="hdnDuration" value="@item.Duration" />*@
                                    </div>
                                </td>
                            </tr>


                        </thead>
                    </table>
                </div>
            </div>


    <div class="col-md-2">
        @*<input type="hidden" id="hdnSearchSightSeeingId" value="@item.SightSeeingId" name="Filter.SightSeeingId" />*@
        <button type="button" onclick="javascript:ViewSightSeeingData(@item.SightSeeingId)" id="btnViewSightSeeing" class="btn btn-info btn-rounded w-min-sm m-b-0-20 waves-effect waves-light">View Info</button><br />
        @if (Model.SightSeeing.BtnFlag == true)
        {
            <br /><ul class="list-unstyled">
                <li> <button type="button" id="btnAddToQuotation" @*onclick="AddToQuotation()"*@ onclick="javascript:AddQuotation('@item.SightSeeingName','@item.location',@item.NetRate,'@item.Duration');" class="btn btn-info btn-rounded w-min-sm m-b-0-20 waves-effect waves-light add-to-cart">Add To Quotation</button></li>
            </ul>
        }
        else
        {
            <br /><ul class="list-unstyled">
                <li><button type="button" id="btnAddToCart" class="btn btn-success btn-rounded label-left w-min-sm m-b-0-75 waves-effect waves-light add-to-cart">Add To Cart</button></li>
            </ul>
        }
    </div>


            @*<div class="col-md-2">
                    @*<ul class="list-unstyled">

                    @*</ul>
                </div>*@

        }
    }


    <script type="text/javascript">
        $(document).ready(function () {
            $(".add-to-cart").click(function () {
                AddSightSeeingInCart($(this));

            });
        });

        function AddSightSeeingInCart(obj) {

            var QuotationItemA = [];

            //alert();
            var Quotation = {

                SightSeeingId: $("#hdnSightSeeingId").val(),

                SightSeeingName: $("#lblSightSeeingName").text(),

                Location: $("#lblLocation").text(),

                Duration: $("#lblDuration").text(),

                Price: $("#lblTotalCost").text(),

                TravelDate:$("#lblTariffDate").text(),

                ProductType: 2,
                // ProductType: $(obj).parents(".m-item").find(".SightSeeing-data").attr("data-producttype"),
            }

            QuotationItemA.push(Quotation);
            alert(JSON.stringify(QuotationItemA));


            var qViewModel =
               {
                   Quotation: {

                       QuatationItem: QuotationItemA

                   }
               }

            var url = "/SightSeeing/SightSeeingAddToCart";

            alert(JSON.stringify(qViewModel));

            //$.cookie("Bookings", JSON.stringify(qViewModel));

            //alert($.cookie("Bookings"));

            //PostAjaxWithProcessJson(url, $.cookie("Bookings"), AfterTransferSave, $("body"));

            $.ajax({

                url: url,

                data: JSON.stringify(qViewModel),

                datatype: "json",

                type: "POST",

                contentType: 'application/json',

                success: function (data) {
                    alert("SightSeeing added in your cart Succesfully.");
                }

            });

        }
    </script>


</div>
